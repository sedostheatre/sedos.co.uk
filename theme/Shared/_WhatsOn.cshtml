@{
    Layout = "_Default";
    IgnoreBody();
}

<div class="page-wrapper">
    @{Html.RenderPartial("Partials/_HeaderCarousel");}

    <div class="banner">
        <div class="container">
            <h1>@Model.Get("title", "What's on")</h1>
        </div>
    </div>
    <div class="upcoming-shows-section">
        <div>
            @{
                var futureShows = Documents["AllShows"]

                    .Where(show => show.Get<IEnumerable<IDocument>>("showtimes").Select(x => x.Get<DateTime>("time")).Any(x => x >= DateTime.Now))
                    .OrderBy(show => show.Get<IEnumerable<IDocument>>("showtimes").Select(x => x.Get<DateTime>("time")).FirstOrDefault());

                <div class="container">
                    <div class="row">
                        @foreach(var show in futureShows)
                        {
                            Html.RenderPartial("Partials/_UpcomingShowCard", show);
                        }
                    </div>
                </div>
            }
        </div>
        <div class="container">
            <div class="row">
                <div class="col">
                    <p class="text-center">
                        <a class="text-white" href="/past-productions">
                            View past productions
                        </a>
                    </p>
                </div>
            </div>
        </div>
    </div>
</div>
